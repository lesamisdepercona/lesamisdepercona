<!doctype html><html lang=fr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Base de donnée open source : Gestion des mots de passe dans MySQL 8 - partie 1 | Les amis de Percona</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Gestion de mots de passe livré avec MySQL 8 en particulier la politique de réutilisation des mots de passe et de la génération de mot de passe aléatoire"><meta name=generator content="Hugo 0.80.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel=stylesheet href=/ananke/css/main.min.css><link rel="shortcut icon" href=/img/favicon.png type=image/x-icon><meta property="og:title" content="Base de donnée open source : Gestion des mots de passe dans MySQL 8 - partie 1"><meta property="og:description" content="Gestion de mots de passe livré avec MySQL 8 en particulier la politique de réutilisation des mots de passe et de la génération de mot de passe aléatoire"><meta property="og:type" content="article"><meta property="og:url" content="https://www.lesamisdepercona.fr/posts/systemes-ameliores-de-gestion-des-mots-de-passe-dans-mysql8/"><meta property="og:image" content="https://www.lesamisdepercona.fr/thumbnail/thumbnailarticle26.jpg"><meta property="article:published_time" content="2021-11-28T11:43:01+04:00"><meta property="article:modified_time" content="2021-11-28T11:43:01+04:00"><meta itemprop=name content="Base de donnée open source : Gestion des mots de passe dans MySQL 8 - partie 1"><meta itemprop=description content="Gestion de mots de passe livré avec MySQL 8 en particulier la politique de réutilisation des mots de passe et de la génération de mot de passe aléatoire"><meta itemprop=datePublished content="2021-11-28T11:43:01+04:00"><meta itemprop=dateModified content="2021-11-28T11:43:01+04:00"><meta itemprop=wordCount content="1334"><meta itemprop=image content="https://www.lesamisdepercona.fr/thumbnail/thumbnailarticle26.jpg"><meta itemprop=keywords content="MySQL,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.lesamisdepercona.fr/thumbnail/thumbnailarticle26.jpg"><meta name=twitter:title content="Base de donnée open source : Gestion des mots de passe dans MySQL 8 - partie 1"><meta name=twitter:description content="Gestion de mots de passe livré avec MySQL 8 en particulier la politique de réutilisation des mots de passe et de la génération de mot de passe aléatoire"><script async src="https://www.googletagmanager.com/gtag/js?id=G-W9SYN1YL24"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-W9SYN1YL24');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-203534013-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-203534013-1');</script></head><body class="ma0 avenir bg-near-white"><header><div class=bg-dark-blue><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib"><img src=/img/logo.png class="w100 mw5-ns" alt="Les amis de Percona"></a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/posts/ title="Articles page">Articles</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="Qui Sommes Nous? page">Qui Sommes Nous?</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/tags/ title="Tags page">Tags</a></li></ul></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">POSTS</aside><div id=sharing class=mt3><a href="https://www.facebook.com/sharer.php?u=https://www.lesamisdepercona.fr/posts/systemes-ameliores-de-gestion-des-mots-de-passe-dans-mysql8/" class="facebook no-underline" aria-label="share on Facebook"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765 50.32h6.744V33.998h4.499l.596-5.624h-5.095l.007-2.816c0-1.466.14-2.253 2.244-2.253h2.812V17.68h-4.5c-5.405.0-7.307 2.729-7.307 7.317v3.377h-3.369v5.625h3.369V50.32zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></a><a href="https://twitter.com/share?url=https://www.lesamisdepercona.fr/posts/systemes-ameliores-de-gestion-des-mots-de-passe-dans-mysql8/&text=Base%20de%20donn%c3%a9e%20open%20source%20:%20Gestion%20des%20mots%20de%20passe%20dans%20MySQL%208%20-%c2%a0partie%c2%a01" class="twitter no-underline" aria-label="share on Twitter"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.lesamisdepercona.fr/posts/systemes-ameliores-de-gestion-des-mots-de-passe-dans-mysql8/&title=Base%20de%20donn%c3%a9e%20open%20source%20:%20Gestion%20des%20mots%20de%20passe%20dans%20MySQL%208%20-%c2%a0partie%c2%a01" class="linkedin no-underline" aria-label="share on LinkedIn"><svg height="32" style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30C64 50.568 50.568 64 34 64zM26.354 48.137V27.71h-6.789v20.427H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></a></div><h1 class="f1 athelas mt3 mb1">Base de donnée open source : Gestion des mots de passe dans MySQL 8 - partie 1</h1><p class=tracked>By <strong>Francis</strong></p><time class="f6 mv4 dib tracked" datetime=2021-11-28T11:43:01+04:00>November 28, 2021</time>
<span class="f6 mv4 dib tracked">- 7 minutes read</span>
<span class="f6 mv4 dib tracked">- 1334 words</span></header><div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-100-l"><p>MySQL 8 est livré avec de nombreuses fonctionnalités intéressantes et j&rsquo;ai récemment exploré ses systèmes de gestion de mots de passe. Je voulais monter une série de blogs à ce sujet, et c&rsquo;est la première partie. Dans cet article, je vais expliquer en détail les sujets suivants.</p><ul><li>Politique de réutilisation des mots de passe</li><li>Génération de mot de passe aléatoire</li></ul><h2 id=politique-de-réutilisation-des-mots-de-passe>Politique de réutilisation des mots de passe</h2><p>MySQL a mis en place des restrictions sur la réutilisation des mots de passe. La restriction peut être établie de deux manières :</p><ul><li>Nombre de changements de mot de passe</li><li>Temps écoulé</li></ul><h2 id=nombre-de-changements-de-mot-de-passe>Nombre de changements de mot de passe</h2><p>À partir des documents MySQL :</p><p><em>Si un compte est restreint sur la base du nombre de changements de mot de passe, un nouveau mot de passe ne peut pas être choisi parmi un nombre spécifié des mots de passe les plus récents.</em></p><p>Pour tester cela, dans mon environnement local, j&rsquo;ai créé l&rsquo;utilisateur avec &ldquo;nombre de changements de mot de passe = 2&rdquo;.</p><pre><code>mysql&gt; create user 'herc'@'localhost' identified by 'Percona@321' password history 2;
Query OK, 0 rows affected (0.02 sec)

mysql&gt; select user, host, password_reuse_history from mysql.user where user='herc'\G
*************************** 1. row ***************************
                  user: herc
                  host: localhost
password_reuse_history: 2
1 row in set (0.00 sec)
</code></pre><p>Ici, « historique des mots de passe 2» définira le nombre de changements de mot de passe. MySQL suivra les changements de mot de passe sur la table « mysql.password_history ».</p><pre><code>mysql&gt; select * from mysql.password_history;
+-----------+------+----------------------------+------------------------------------------------------------------------+
| Host      | User | Password_timestamp         | Password                                                               |
+-----------+------+----------------------------+------------------------------------------------------------------------+
| localhost | herc | 2021-09-20 15:44:42.295778 | $A$005$=R:q'M(Kh#D];c~SdCLyluq2UVHFobjWOFTwn2JYVFDyI042sl56B7DCPSK5 |
+-----------+------+----------------------------+------------------------------------------------------------------------+
1 row in set (0.00 sec)
</code></pre><p>Maintenant, je vais changer le mot de passe du compte « herc@localhost ».</p><pre><code>mysql&gt; alter user 'herc'@'localhost' identified by 'MySQL@321';
Query OK, 0 rows affected (0.02 sec)

mysql&gt; select * from mysql.password_history\G
*************************** 1. row ***************************
              Host: localhost
              User: herc
Password_timestamp: 2021-09-20 15:49:15.459018
CGeRQT31UUwtw194KOKGdNbgj3558VUB.dxcoS8r4IKpG8
*************************** 2. row ***************************
              Host: localhost
              User: herc
Password_timestamp: 2021-09-20 15:44:42.295778
          Password: $A$005$=R:q'M(Kh#D];c~SdCLyluq2UVHFobjWOFTwn2JYVFDyI042sl56B7DCPSK5
2 rows in set (0.00 sec)
</code></pre><p>Ça a marché. Après avoir changé le mot de passe, j&rsquo;ai vérifié la table &ldquo;mysql.password_history&rdquo;. Maintenant, la table a la trace des deux derniers mots de passe.</p><p>Maintenant, je vais à nouveau changer le mot de passe du compte « herc@localhost ». Cette fois, je vais attribuer le même mot de passe qui a été attribué lors de la création de l&rsquo;utilisateur « Percona@321 ».</p><pre><code>mysql&gt; alter user 'herc'@'localhost' identified by 'Percona@321';
ERROR 3638 (HY000): Cannot use these credentials for 'herc@localhost' because they contradict the password history policy
</code></pre><p>ça ne marche pas; Je n&rsquo;arrive pas à réutiliser le premier mot de passe. Parce que selon ma politique de réutilisation, je ne peux pas réutiliser les deux derniers mots de passe et ils sont suivis dans la table « mysql.password_policy ». Donc, dans mon cas, si je veux réutiliser mon premier mot de passe, il ne peut pas être dans cette liste.</p><p>J&rsquo;ai donc attribué un mot de passe différent. Maintenant, mon premier mot de passe est supprimé de la liste des deux derniers mots de passe) et j&rsquo;ai essayé d&rsquo;attribuer le premier mot de passe.</p><pre><code>mysql&gt; alter user 'herc'@'localhost' identified by 'Herc@321';
Query OK, 0 rows affected (0.01 sec)

mysql&gt; alter user 'herc'@'localhost' identified by 'Percona@321';
Query OK, 0 rows affected (0.02 sec)
</code></pre><p>Cela fonctionne maintenant. C&rsquo;est ainsi que vous pouvez restreindre la réutilisation des mots de passe en fonction du nombre de changements de mot de passe.</p><p>Cela peut être implémenté globalement et au démarrage pour tous les utilisateurs à l&rsquo;aide de la variable « password_history ».</p><pre><code>#vi my.cnf
[mysqld]
password_history=6

#set global
mysql&gt; set global password_history=5;
Query OK, 0 rows affected (0.00 sec)
</code></pre><h2 id=politique-de-réutilisation-des-mots-de-passe-basée-sur-le-temps-écoulé>Politique de réutilisation des mots de passe basée sur le temps écoulé</h2><p>À partir du document MySQL :</p><p><em>Si un compte est restreint en fonction du temps écoulé, un nouveau mot de passe ne peut pas être choisi parmi les mots de passe de l&rsquo;historique qui sont plus récents qu&rsquo;un nombre de jours spécifié.</em></p><p>Pour tester cela dans mon environnement local, j&rsquo;ai créé l&rsquo;utilisateur « sri@localhost » avec un intervalle de réutilisation du mot de passe de cinq jours.</p><pre><code>mysql&gt; create user 'sri'@'localhost' identified by 'Percona@321' password reuse interval 5 day;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; select user, host, password_reuse_time from mysql.user where user='sri'\G
*************************** 1. row ***************************
               user: sri
               host: localhost
password_reuse_time: 5
1 row in set (0.00 sec)
</code></pre><p>Donc, cela signifie que pendant cinq jours, je ne peux pas réutiliser le mot de passe du compte « sri@localhost ».</p><pre><code>mysql&gt; select * from mysql.password_history where user='sri'\G
*************************** 1. row ***************************
              Host: localhost
              User: sri
Password_timestamp: 2021-09-20 16:09:27.918585
          Password: $A$005$+B   e3!C9&amp;8m
                                         eFRG~IqRWX4b6PtzLA8I4VsdYvWU3qRs/nip/QRhXXR5phT6
1 row in set (0.00 sec)
</code></pre><p>Maintenant, je vais faire l&rsquo;ALTER pour changer le mot de passe.</p><pre><code>mysql&gt; alter user 'sri'@'localhost' identified by 'Herc@321';
Query OK, 0 rows affected (0.02 sec)

mysql&gt; select * from mysql.password_history where user='sri'\G
*************************** 1. row ***************************
              Host: localhost
              User: sri
Password_timestamp: 2021-09-20 16:17:51.840483
          Password: $A$005$~k7qp8.OP=^#e79qwtiYd7/cmCFLvHM7MHFbvfX2WlhXqzjmrN03gGZ4
*************************** 2. row ***************************
              Host: localhost
              User: sri
Password_timestamp: 2021-09-20 16:09:27.918585
          Password: $A$005$+B   e3!C9&amp;8m
                                         eFRG~IqRWX4b6PtzLA8I4VsdYvWU3qRs/nip/QRhXXR5phT6
2 rows in set (0.00 sec)
</code></pre><p>Ça fonctionne. Mais, si je réutilise l&rsquo;un de ces mots de passe, sur la base de la politique de réutilisation, cela ne sera pas autorisé pendant cinq jours. Laissez-moi essayer avec le premier mot de passe maintenant.</p><pre><code>mysql&gt; alter user 'sri'@'localhost' identified by 'Percona@321';
ERROR 3638 (HY000): Cannot use these credentials for 'sri@localhost' because they contradict the password history policy
</code></pre><p>Il donne l&rsquo;erreur comme prévu. Cette restriction peut être implémentée globalement et au démarrage pour tous les utilisateurs à l&rsquo;aide de la variable « password_reuse_interval ».</p><pre><code>#vi my.cnf
[mysqld]
password_reuse_interval=365

#set global
mysql&gt; set global password_reuse_interval=365;
Query OK, 0 rows affected (0.00 sec)
</code></pre><h2 id=génération-de-mot-de-passe-aléatoire>Génération de mot de passe aléatoire</h2><p>Depuis MySQL 8.0.18, MySQL a la capacité de créer des mots de passe aléatoires pour les comptes d&rsquo;utilisateurs. Cela signifie que nous n&rsquo;avons pas besoin d&rsquo;attribuer les mots de passe et MySQL s&rsquo;en chargera. Il a le support des déclarations suivantes :</p><ul><li>CRÉER UN UTILISATEUR</li><li>MODIFIER L&rsquo;UTILISATEUR</li><li>FIXER LE MOT DE PASSE</li></ul><p>Nous devons utiliser le « MOT DE PASSE ALÉATOIRE » au lieu de fournir le texte du mot de passe, et le mot de passe sera affiché à l&rsquo;écran lors de la création.</p><p>Par exemple:</p><pre><code>mysql&gt; create user 'sakthi'@'localhost' identified by random password;
+--------+-----------+----------------------+
| user   | host      | generated password   |
+--------+-----------+----------------------+
| sakthi | localhost | .vZYy+&lt;&lt;BO7l1;vtIufH |
+--------+-----------+----------------------+
1 row in set (0.01 sec)

mysql&gt; alter user 'sri'@'localhost' identified by random password;
+------+-----------+----------------------+
| user | host      | generated password   |
+------+-----------+----------------------+
| sri  | localhost | 5wb&gt;2[]q*jbDsFvlN-i_ |
+------+-----------+----------------------+
1 row in set (0.02 sec)
</code></pre><p>Les hachages de mot de passe seront stockés dans la table « mysql.user ».</p><pre><code>mysql&gt; select user, authentication_string from mysql.user where user in ('sakthi','sri')\G
*************************** 1. row ***************************
                 user: sakthi
authentication_string: $A$005$L`PYcedj%3tz*J&gt;ioBP1.Rsrj7H8wtelqijvV0CFnXVnWLNIc/RZL0C06l4oA
*************************** 2. row ***************************
                 user: sri
authentication_string: $A$005$/k?aO&amp;ap.#b=
                                          ^zt[E|x9q3w9uHn1oEumXUgnqNMH8xWo4xd/s26hTPKs1AbC2
2 rows in set (0.00 sec)
</code></pre><p>*** Par défaut, la longueur du mot de passe est de 20 caractères sur la base de la variable &ldquo;generated_random_password_length&rdquo;. Nous pouvons définir la longueur du mot de passe en utilisant cette variable et la longueur autorisée est de 5 à 255. ***</p><pre><code>mysql&gt; select @@generated_random_password_length;
+------------------------------------+
| @@generated_random_password_length |
+------------------------------------+
|                                 20 |
+------------------------------------+
1 row in set (0.00 sec)
</code></pre><p>Les mots de passe aléatoires ne dérangeront pas la politique &ldquo;validate_password&rdquo; si le composant est implémenté dans MySQL.</p><p>Espérons que ce blog vous sera utile pour en savoir plus sur la politique de réutilisation des mots de passe et les mots de passe aléatoires dans MySQL 8. Il y a quelques fonctionnalités supplémentaires à parcourir, qui seront couvertes dans la prochaine partie de la série de blogs. Restez à l&rsquo;écoute!</p><p><strong>Percona Distribution for MySQL est la solution MySQL open source la plus complète, stable, évolutive et sécurisée disponible, offrant des environnements de base de données de niveau entreprise pour vos applications métier les plus critiques… et son utilisation est gratuite !</strong></p><p>Source : <a href=https://www.percona.com/blog/enhanced-password-management-systems-in-mysql-8-part-1/>Percona Blog</a></p><ul class=pa0><li class=list><a href=/tags/mysql class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">MySQL</a></li></ul><div class="mt6 instapaper_ignoref"></div></div></article></main><footer class="bg-dark-blue bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://www.lesamisdepercona.fr/>&copy; Les amis de Percona 2022</a><div></div></div></footer></body></html>